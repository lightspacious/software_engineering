{% extends "base.html" %}

{% block content %}
<style>
    /* é‡ç½®æ‰€æœ‰å…ƒç´ çš„marginå’Œpadding */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    /* ç¡®ä¿htmlå’Œbodyå…ƒç´ å æ»¡æ•´ä¸ªè§†å£ */
    html, body {
        width: 100%;
        height: 100%;
        overflow: hidden;
    }

    /* ä¸»å®¹å™¨å æ»¡æ•´ä¸ªçˆ¶å…ƒç´  */
    .container {
        display: grid;
        grid-template-columns: 3fr 1fr; /* å·¦2/3ï¼Œå³1/3 */
        width: 100%;
        height: 100vh; /* ä½¿ç”¨è§†å£é«˜åº¦å•ä½ */
        gap: 10px;
        padding: 10px;
    }

    .left-panel {
        display: grid;
        grid-template-rows: 7fr 4fr; /* ä¸Šä¸‹ç­‰åˆ† */
        gap: 10px;
        height: 100%; /* ç¡®ä¿é«˜åº¦å æ»¡çˆ¶å®¹å™¨ */
    }

    .left-top {
        display: grid;
        grid-template-columns: 3fr 4fr; /* å·¦å³ç­‰åˆ† */
        gap: 10px;
        height: 100%; /* ç¡®ä¿é«˜åº¦å æ»¡çˆ¶å®¹å™¨ */
    }

    .module {
    background-color: rgba(0, 0, 0, 0.3);
    padding: 15px;
    border-radius: 5px;
    color: white;
    height: 100%; /* ç¡®ä¿é«˜åº¦å æ»¡çˆ¶å®¹å™¨ */
    overflow: auto; /* ä¿®æ”¹ä¸º auto ä»¥æ˜¾ç¤ºæ»šåŠ¨æ¡ */
}


    .module-title {
        text-align: center;
        color: #00c3ff;
        margin-bottom: 10px;
        font-size: 18px;
    }

    .right-panel {
    display: flex;
    flex-direction: column;
    gap: 10px;
    height: calc(100% - 20px); /* å‡å» padding å’Œ gap çš„å½±å“ */
    padding: 10px 0; /* åªä¿ç•™å‚ç›´æ–¹å‘çš„ padding */
}

.combined-module {
    background-color: rgba(0, 0, 0, 0.3);
    padding: 15px;
    border-radius: 5px;
    color: white;
    display: flex;
    flex-direction: column;
    height: 100%; /* ç¡®ä¿é«˜åº¦å æ»¡çˆ¶å®¹å™¨ */
    overflow: auto; /* ä¿®æ”¹ä¸º auto ä»¥æ˜¾ç¤ºæ»šåŠ¨æ¡ */
    flex: 1; /* ç¡®ä¿æ¨¡å—å¡«æ»¡å¯ç”¨ç©ºé—´ */
    min-height: 0; /* å…è®¸å†…å®¹è¢«å‹ç¼© */
}
</style>

<div class="container">
    <!-- å·¦ä¾§å¤§é¢æ¿ -->
    <div class="left-panel">
        <!-- å·¦ä¸Šå°é¢æ¿ï¼Œåˆ†ä¸ºå·¦å³ä¸¤éƒ¨åˆ† -->
        <div class="left-top">
            <!-- æ¨¡å—A1 -->
            <div class="module">
                <div class="module-title">ç¡¬ä»¶ä¿¡æ¯ç»Ÿè®¡</div>
                <p>å†…å®¹åŒºåŸŸ A1</p>
            </div>
            <!-- æ¨¡å—A2 -->
            <div class="module">
                <div class="module-title">æ•°æ®ä¸­å¿ƒåˆ†å¸ƒ</div>
                <p>å†…å®¹åŒºåŸŸ A2</p>
            </div>
        </div>
        <!-- å·¦ä¸‹æ¨¡å—B -->
        <div class="module">
            <div class="module-title">æ•°æ®ç±»å‹ç»Ÿè®¡</div>
            <p>å†…å®¹åŒºåŸŸ B</p>
        </div>
    </div>

    <!-- å³ä¾§å°é¢æ¿ -->
    <div class="right-panel">
        <div class="combined-module">
            <div class="module-title4">ä¼ æ„Ÿå™¨ä¿¡æ¯åŒºå—</div>
            <div class="time-metrics4">
                <div class="metric-item4">
                    <span class="metric-label4">å¹³å‡ä¼ è¾“æ—¶é•¿</span>
                    <span class="metric-value blue-text4" id="avg-transmission-time4">02:45s</span>
                </div>
                <div class="metric-item4">
                    <span class="metric-label4">å¹³å‡å¤„ç†æ—¶é•¿</span>
                    <span class="metric-value blue-text4" id="avg-processing-time4">00:02s</span>
                </div>
            </div>
            <div class="sensor-info4">         
                <div class="device-table4">
                    <div class="table-header4">
                        <span>ç±»å‹</span>
                        <span>ç¼–å·</span>
                        <span>å¤§å°</span>
                    </div>
                    <div class="table-row4">
                        <span>æ°´åº•æ‘„åƒå¤´</span><span>video-1</span><span>4Mb</span>
                    </div>
                    <div class="table-row4">
                        <span>4CIFæ‘„åƒå¤´</span><span>video-2</span><span>128kb</span>
                    </div>
                    <div class="table-row4">
                        <span>ç½‘ç»œæ‘„åƒå¤´</span><span>video-3</span><span>100kb</span>
                    </div>
                    <div class="table-row4">
                        <span>éŸ³å“è®¾å¤‡</span><span>sonar-1</span><span>10kb</span>
                    </div>
                    <div class="table-row4">
                        <span>ä¼ æ„Ÿå™¨è®¾å¤‡</span><span>sensor-1</span><span>2kb</span>
                    </div>
                    <div class="table-row4">
                        <span>æ°”è±¡ç«™</span><span>meteor-1</span><span>500b</span>
                    </div>
                </div>
                
            </div>
            
            <div class="module-title4">æ•°æ®åº“ä¿¡æ¯</div>
            <div class="database-stats4">
                <div class="stats-item4">
                    <span class="icon database-icon4">ğŸ’¾</span> <!-- æ•°æ®åº“å›¾æ ‡ -->
                    <span id="db-type4">MySQLï¼ŒHBase</span>
                </div>
                <div class="stats-item4">
                    <span class="icon query-icon4">ğŸ”</span> <!-- æŸ¥è¯¢å›¾æ ‡ -->
                    <span id="query-success4">æŸ¥è¯¢/æˆåŠŸï¼š869æ¬¡</span>
                </div>
                <div class="stats-item4">
                    <span class="icon time-icon4">â±ï¸</span> <!-- æ—¶é’Ÿå›¾æ ‡ -->
                    <span id="avg-query-time4">å¹³å‡è€—æ—¶ï¼š4.67s</span>
                </div>
            </div>
            
    </div>
</div>
<!-- tww's script  start-->
<script>
    function updateSensorData() {
        // æ›´æ–°ä¼ è¾“æ—¶é•¿
        const avgTransmissionTime = getRandomTime();
        document.getElementById('avg-transmission-time4').textContent = `${avgTransmissionTime}s`;

        // æ›´æ–°å¤„ç†æ—¶é•¿
        const avgProcessingTime = getRandomTime();
        document.getElementById('avg-processing-time4').textContent = `${avgProcessingTime}s`;
    }

    function updateDatabaseStats() {
        // // æ›´æ–°æ•°æ®åº“ç±»å‹
        const dbType = getRandomDbType();
        document.getElementById('db-type4').textContent = dbType;

        // æ›´æ–°æŸ¥è¯¢æˆåŠŸæ¬¡æ•°
        const querySuccess = getRandomQueryCount();
        document.getElementById('query-success4').textContent = `æŸ¥è¯¢/æˆåŠŸï¼š${querySuccess}æ¬¡`;

        // æ›´æ–°å¹³å‡æŸ¥è¯¢è€—æ—¶
        const avgQueryTime = getRandomTime();
        document.getElementById('avg-query-time4').textContent = `å¹³å‡è€—æ—¶ï¼š${avgQueryTime}s`;
    }

    // æ¨¡æ‹Ÿè·å–éšæœºæ—¶é—´
    function getRandomTime() {
        const min = 1; 
        const max = 10; 
        const randomTime = (Math.random() * (max - min) + min).toFixed(2); // ä¿ç•™ä¸¤ä½å°æ•°
        return randomTime;
    }

    // æ¨¡æ‹Ÿè·å–éšæœºæ•°æ®åº“ç±»å‹
    function getRandomDbType() {
        const dbTypes = ['MySQL, HBase', 'MongoDB, Redis', 'PostgreSQL, Cassandra'];
        const randomIndex = Math.floor(Math.random() * dbTypes.length);
        return dbTypes[randomIndex];
    }

    // æ¨¡æ‹Ÿè·å–éšæœºæŸ¥è¯¢æˆåŠŸæ¬¡æ•°
    function getRandomQueryCount() {
        return Math.floor(Math.random() * 1000);
    }

    // æ¯5ç§’æ›´æ–°ä¸€æ¬¡æ•°æ®
    setInterval(() => {
        updateSensorData();
        updateDatabaseStats();
    }, 50000); // æ¯5000æ¯«ç§’ï¼ˆå³5ç§’ï¼‰æ›´æ–°ä¸€æ¬¡


</script>
<!-- tww's script  end-->
<!-- tww's style start-->
<style>

    .sensor-info4 {
        background: rgba(26, 43, 60, 0.85); /* æ˜äº®çš„æ·±è‰²é€æ˜èƒŒæ™¯ */
        padding: 8px; /* æ›´å°çš„å†…è¾¹è· */
        margin: 4px; /* æ›´å°çš„å¤–è¾¹è· */
        border-radius: 6px; /* æ›´åœ†æ¶¦çš„è¾¹è§’ */
        color: #ecf0f1; /* æ›´äº®çš„æ–‡å­—é¢œè‰² */
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.2); /* å¢å¼ºé˜´å½±æ•ˆæœï¼Œæå‡å±‚æ¬¡æ„Ÿ */
        backdrop-filter: blur(4px); /* èƒŒæ™¯æ¨¡ç³Šï¼Œå¢å¼ºå±‚æ¬¡æ„Ÿ */
        /* transition: background 0.3s ease, box-shadow 0.3s ease; æ·»åŠ åŠ¨æ€è¿‡æ¸¡æ•ˆæœ */
    }



    /* æ•°æ®åº“ç»Ÿè®¡åŒºå— */
    .database-stats4 {
        background: rgba(26, 43, 60, 0.85); /* æ˜äº®çš„æ·±è‰²é€æ˜èƒŒæ™¯ */
        padding: 10px;
        margin: 10px;
        border-radius: 8px; /* æ›´åœ†æ¶¦çš„è¾¹è§’ */
        color: #ecf0f1; /* æ›´äº®çš„æ–‡å­—é¢œè‰² */
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2); /* å¢å¼ºé˜´å½±æ•ˆæœï¼Œæå‡å±‚æ¬¡æ„Ÿ */
        backdrop-filter: blur(4px); /* èƒŒæ™¯æ¨¡ç³Šï¼Œå¢å¼ºå±‚æ¬¡æ„Ÿ */
        transition: background 0.3s ease, box-shadow 0.3s ease; /* æ·»åŠ åŠ¨æ€è¿‡æ¸¡æ•ˆæœ */
    }

    /* åŠ¨æ€æ•ˆæœï¼šé¼ æ ‡æ‚¬åœæ—¶æ”¹å˜èƒŒæ™¯å’Œé˜´å½± */
    .database-stats4:hover {
        background: rgba(7, 80, 128, 0.9); /* æ›´äº®çš„èƒŒæ™¯é¢œè‰² */
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3); /* å¢å¼ºé˜´å½±æ•ˆæœ */
    }

    .time-metrics4 {
        display: flex;
        gap: 16px;
        margin-bottom: 20px;
    }

    .metric-item4 {
        background: rgba(58, 83, 106, 0.85); /* æäº®çš„é€æ˜å¡ç‰‡èƒŒæ™¯ */
        text-align: center;
        flex: 1;
        padding: 16px;
        border-radius: 10px; /* æ›´å¤§åœ†è§’ */
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2); /* æ›´åŠ æ˜æ˜¾çš„é˜´å½±æ•ˆæœ */
        transition: background 0.3s ease, transform 0.3s ease; /* æ·»åŠ åŠ¨æ€æ•ˆæœ */
    }

    /* metric-label æ ·å¼è°ƒæ•´ï¼ˆè“è‰²è°ƒï¼‰ */
    .metric-label4 {
        font-size: 16px;
        font-weight: bold;
        color: #3498db; /* äº®è“è‰²å­—ä½“ */
        background: linear-gradient(to right, #74bded, #deb3f1); /* è“è‰²æ¸å˜èƒŒæ™¯ */
        -webkit-background-clip: text; /* èƒŒæ™¯æ¸å˜åº”ç”¨äºæ–‡æœ¬ */
        background-clip: text; /* æ ‡å‡†å±æ€§ */
        color: transparent; /* ä½¿æ–‡æœ¬æœ¬èº«é€æ˜ */
        text-shadow: 1px 1px 6px rgba(0, 0, 0, 0.3); /* å¼ºåŒ–æ–‡æœ¬é˜´å½±æ•ˆæœ */
        transition: color 0.3s ease, text-shadow 0.3s ease; /* å¹³æ»‘è¿‡æ¸¡ */
    }

    /* é¼ æ ‡æ‚¬åœæ—¶çš„åŠ¨æ€æ•ˆæœ */
    .metric-label4:hover {
        color: #cca3ef; /* é¼ æ ‡æ‚¬åœæ—¶æ”¹å˜é¢œè‰²ä¸ºè“ç»¿è‰² */
        text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5); /* å¢å¼ºæ–‡æœ¬é˜´å½± */
    }



    .table-header4 {
        background: rgba(52, 152, 219, 0.9); /* æ›´äº®çš„è¡¨å¤´èƒŒæ™¯ */
        display: grid;
        grid-template-columns: 2fr 2fr 1fr;
        color: #fff;
        padding: 8px;
        border-radius: 8px;
        font-weight: bold;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* è½»å¾®é˜´å½±æ•ˆæœ */
        transition: background 0.3s ease; 
    }



    .table-row4 {
        display: grid;
        grid-template-columns: 2fr 2fr 1fr; /* è°ƒæ•´åˆ—å®½ï¼Œç¡®ä¿å†…å®¹æ›´ç´§å‡‘ */
        padding: 8px; /* å‡å°å†…è¾¹è· */
        border-bottom: 1px solid rgba(52, 152, 219, 0.5); /* æ›´äº®çš„åˆ†éš”çº¿ */
        transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, background-image 0.3s ease; /* æ·»åŠ æ¸å˜è¿‡æ¸¡æ•ˆæœ */
    }

    /* é¼ æ ‡æ‚¬åœæ—¶çš„åŠ¨æ€æ•ˆæœ */
    .table-row4:hover {
        background-image: linear-gradient(to right, rgba(161, 208, 239, 0.1), rgba(52, 152, 219, 0.3)); /* æ¸å˜èƒŒæ™¯æ•ˆæœ */
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2); /* æ·»åŠ é˜´å½±æ•ˆæœ */
        transform: translateY(-5px); /* æ‚¬æµ®æ•ˆæœï¼šå…ƒç´ å‘ä¸Šç§»åŠ¨ */
    }


    /* æ•°æ®åº“ä¿¡æ¯åŒºå— */
    .database-stats4 {
        background: rgba(26, 43, 60, 0.85); /* èƒŒæ™¯é¢œè‰² */
        padding: 12px 16px; /* è°ƒæ•´å†…è¾¹è· */
        margin: 8px; /* å‡å°‘å¤–è¾¹è· */
        border-radius: 6px; /* åœ†è§’æ•ˆæœ */
        color: #ecf0f1; /* æ–‡å­—é¢œè‰² */
        box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2); /* é˜´å½±æ•ˆæœ */
        backdrop-filter: blur(4px); /* èƒŒæ™¯æ¨¡ç³Šæ•ˆæœ */
    }

    /* å•ä¸ªæ•°æ®é¡¹çš„æ ·å¼ */
    .stats-item4 {
        display: flex;
        align-items: center;
        margin-bottom: 8px; /* å‡å°‘æ¯é¡¹ä¹‹é—´çš„é—´è· */
        font-size: 14px; /* è°ƒæ•´å­—ä½“å¤§å° */
        transition: background-color 0.3s ease, transform 0.3s ease; /* åŠ¨ç”»æ•ˆæœ */
    }

    /* å›¾æ ‡æ ·å¼ */
    .icon4 {
        font-size: 18px; /* è°ƒæ•´å›¾æ ‡çš„å¤§å° */
        margin-right: 8px; /* å‡å°‘å›¾æ ‡ä¸æ–‡æœ¬ä¹‹é—´çš„é—´è· */
    }

    /* ä¸ºä¸åŒçš„å›¾æ ‡æŒ‡å®šé¢œè‰² */
    .database-icon4 {
        color: #2980b9; /* è“è‰² */
    }

    .query-icon4 {
        color: #27ae60; /* ç»¿è‰² */
    }

    .time-icon4 {
        color: #f39c12; /* é»„è‰² */
    }

    /* é¼ æ ‡æ‚¬åœæ—¶çš„æ•°æ®é¡¹æ•ˆæœ */
    .stats-item4:hover {
        background-color: rgba(183, 214, 234, 0.2); /* é¼ æ ‡æ‚¬åœæ—¶çš„èƒŒæ™¯é¢œè‰² */
        transform: translateX(5px); /* å‘å³ç§»åŠ¨æ•ˆæœ */
    }

    /* æ¨¡å—æ ‡é¢˜æ ·å¼ */
    .module-title4 {
        font-size: 18px;
        /* font-weight: bold; */
        color: #3498db;
        margin-bottom: 10px; /* å‡å°‘æ ‡é¢˜ä¸å†…å®¹ä¹‹é—´çš„é—´è· */
    }
</style>
<!-- tww's style start-->
{% endblock %}